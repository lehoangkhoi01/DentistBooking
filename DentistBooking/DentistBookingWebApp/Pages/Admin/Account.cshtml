@page
@using DataAccess.Interfaces
@using DataAccess.Repository
@model DentistBookingWebApp.Pages.Admin.CustomerPage.AccountModel

@{
    ViewData["Title"] = "Account";
    IDentistRepository dentistRepository = new DentistRepository();
    ICustomerRepository customerRepository = new CustomerRepository();
}

<h1>Account</h1>

<p>
    <a asp-page="Create">Create New</a>
</p>
<div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        User
    </button>
    <div class="dropdown-menu" role="tablist" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" onclick="toggleButton('all')" href="#all" onselect="true" role="tab">All</a>
        <a class="dropdown-item" onclick="toggleButton('customer')" href="#customer" role="tab">Customer</a>
        <a class="dropdown-item" onclick="toggleButton('dentist')" href="#dentist" role="tab">Dentist</a>
    </div>
</div>
<div class="tab-panel" id="all" role="tabpanel">
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Customer.First().User.Email)
                </th>
                <th>
                    Full Name
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Customer.First().User.Role)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Customer)
            {
                @*                if (item.RoleId == 2)
            {*@
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.User.Email)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.FullName)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.User.Role.Name)
                    </td>
                    <td>
                        <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                        <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                        <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
                    </td>
                </tr>
                @*}*@
            }
            @foreach (var item in Model.Dentist)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.User.Email)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.FullName)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.User.Role.Name)
                    </td>
                    <td>
                        <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                        <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                        <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<div class="tab-panel" style="display:none" id="customer" role="tabpanel">
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Customer.First().User.Email)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Customer.First().FullName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Customer.First().User)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Customer)
            {
                @*                if (item.RoleId == 2)
            {*@
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.User.Email)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.FullName)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.User.Role.Name)
                    </td>
                    <td>
                        <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                        <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                        <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
                    </td>
                </tr>
                @*}*@
            }

        </tbody>
    </table>
</div>
<div class="tab-panel" style="display:none" id="dentist" role="tabpanel">
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Dentist.First().User.Email)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Dentist.First().FullName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Dentist.First().User.Role.Name)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Dentist)
            {
                @*                if (item.RoleId == 3)
            {*@
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.User.Email)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.FullName)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.User.Role.Name)
                    </td>
                    <td>
                        <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                        <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                        <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
                    </td>
                </tr>
                @*}*@
            }

        </tbody>
    </table>
</div>
<script>
    function toggleButton(id) {
        if (id == 'all') {
            document.getElementById(id).style.display = 'block';
            document.getElementById('customer').style.display = 'none';
            document.getElementById('dentist').style.display = 'none';
        } else if (id == 'customer') {
            document.getElementById(id).style.display = 'block';
            document.getElementById('all').style.display = 'none';
            document.getElementById('dentist').style.display = 'none';
        }
        else {
            document.getElementById(id).style.display = 'block';
            document.getElementById('customer').style.display = 'none';
            document.getElementById('all').style.display = 'none';
        }
    }
</script>